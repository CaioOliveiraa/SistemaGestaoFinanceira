<!-- apps/frontend/src/app/features/auth/reset-password/reset-password.component.html -->
<div *ngIf="errorMsg; else formTpl" class="error-container">
    <p class="error">{{ errorMsg }}</p>
    <a routerLink="/auth/forgot-password">Voltar para recuperação</a>
</div>

<ng-template #formTpl>
    <div class="reset-password-container">
        <h2>Redefinir Senha</h2>
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
            <!-- Nova senha -->
            <div class="form-group">
                <label for="newPassword">Nova Senha</label>
                <input id="newPassword" type="password" formControlName="newPassword" />
                <div *ngIf="form.get('newPassword')?.touched && form.get('newPassword')?.invalid" class="error">
                    <small *ngIf="form.get('newPassword')?.errors?.['required']">Informe a nova senha.</small>
                    <small *ngIf="form.get('newPassword')?.errors?.['minlength']">Mínimo 6 caracteres.</small>
                </div>
            </div>

            <!-- Confirmar senha -->
            <div class="form-group">
                <label for="confirmPassword">Confirmar Senha</label>
                <input id="confirmPassword" type="password" formControlName="confirmPassword" />
                <div *ngIf="form.errors?.['mismatch'] && form.get('confirmPassword')?.touched" class="error">
                    <small>As senhas não coincidem.</small>
                </div>
            </div>

            <button type="submit" [disabled]="submitting || form.invalid">
                {{ submitting ? 'Processando…' : 'Redefinir Senha' }}
            </button>

            <p class="success" *ngIf="successMsg">{{ successMsg }}</p>
        </form>
    </div>
</ng-template>